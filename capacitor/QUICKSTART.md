# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Capacitor Android App

## ‚úÖ –í—Å—ë —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–æ–±—Ä–∞–Ω frontend
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ Android –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å https://ru.eblusha.org

## üöÄ –ó–∞–ø—É—Å–∫ –≤ Android Studio

```bash
cd capacitor
npm run open:android
```

Android Studio –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ó–∞—Ç–µ–º:
1. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Gradle
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä
3. –ù–∞–∂–º–∏—Ç–µ Run (‚ñ∂Ô∏è) –∏–ª–∏ `Shift+F10`

## üì± –°–±–æ—Ä–∫–∞ APK/AAB

### –ß–µ—Ä–µ–∑ Android Studio:
1. `Build` ‚Üí `Generate Signed Bundle / APK`
2. –í—ã–±–µ—Ä–∏—Ç–µ `AAB` –∏–ª–∏ `APK`
3. –°–æ–∑–¥–∞–π—Ç–µ keystore (–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π —Ä–∞–∑) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:
```bash
cd capacitor/android
./gradlew assembleRelease  # –¥–ª—è APK
./gradlew bundleRelease    # –¥–ª—è AAB
```

APK –±—É–¥–µ—Ç –≤: `android/app/build/outputs/apk/release/`
AAB –±—É–¥–µ—Ç –≤: `android/app/build/outputs/bundle/release/`

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ frontend:

```bash
# 1. –°–æ–±—Ä–∞—Ç—å frontend
cd ../frontend
npm run build

# 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Capacitor
cd ../capacitor
npm run sync:android

# 3. –û—Ç–∫—Ä—ã—Ç—å –≤ Android Studio (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm run open:android
```

–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
cd capacitor
npm run sync:android
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `capacitor.config.ts`:

```typescript
server: {
  url: 'https://ru.eblusha.org',  // –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω—ã–π URL
  cleartext: false,
}
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
npm run sync:android
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–í `capacitor.config.ts`:
```typescript
server: {
  url: 'http://localhost:5173',
  cleartext: true,
}
```

**–í–∞–∂–Ω–æ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ frontend dev server:
```bash
cd ../frontend && npm run dev
```

### –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `server.url` –≤ `capacitor.config.ts`:
```typescript
// server: {
//   url: 'https://ru.eblusha.org',
//   cleartext: false,
// },
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ `webDir` (../frontend/dist).

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
npm run sync

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ Android
npm run sync:android

# –û—Ç–∫—Ä—ã—Ç—å –≤ Android Studio
npm run open:android

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-—Ä–µ—Å—É—Ä—Å—ã
npm run copy

# –û–±–Ω–æ–≤–∏—Ç—å Capacitor
npm run update
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Gradle –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è
```bash
cd android
./gradlew clean
cd ..
npm run sync:android
```

### –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Android SDK
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Java (–Ω—É–∂–Ω–∞ Java 17+)
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à: `./gradlew clean`

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ru.eblusha.org –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è INTERNET –≤ AndroidManifest.xml
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTTPS

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `README.md`

