import{r as u,u as m,j as e}from"./vendor-query-D8-W16Rz.js";import{a as p,c as l}from"./index-7pNz9vLK.js";import"./vendor-react-DyfnzrEv.js";import"./vendor-socket-CA1CrNgP.js";import"./vendor-crypto-C7xP7Q7Y.js";function j(){const n=p(),[a,i]=u.useState(null),s=m({mutationFn:async t=>(await l.post("/auth/register",t)).data,onSuccess:()=>{n("/auth",{replace:!0})},onError:t=>{i(t.response?.data?.message??"Ошибка регистрации")}}),o=t=>{t.preventDefault();const r=new FormData(t.currentTarget);s.mutate({username:String(r.get("username")??""),displayName:String(r.get("displayName")??""),password:String(r.get("password")??"")})};return e.jsxs("form",{className:"auth-form",onSubmit:o,children:[e.jsx("h2",{children:"Регистрация"}),e.jsxs("label",{children:["Никнейм",e.jsx("input",{name:"username",type:"text",required:!0,minLength:3})]}),e.jsxs("label",{children:["Отображаемое имя",e.jsx("input",{name:"displayName",type:"text",required:!0,minLength:2})]}),e.jsxs("label",{children:["Пароль",e.jsx("input",{name:"password",type:"password",required:!0,minLength:8})]}),a?e.jsx("div",{className:"auth-error",children:a}):null,e.jsx("button",{type:"submit",disabled:s.isPending,children:s.isPending?"Создаем…":"Создать аккаунт"})]})}export{j as default};
