import{c as l,u as c,j as e}from"./vendor-query-CNP5Hy5J.js";import{d as r}from"./index-g7jd-lEN.js";import"./vendor-react-BcTlWpV0.js";import"./vendor-socket-CA1CrNgP.js";import"./vendor-crypto-GGjuBpPe.js";function j(){const n=l({queryKey:["me"],queryFn:async()=>(await r.get("/status/me")).data.user}),i=c({mutationFn:async t=>(await r.patch("/status/me",t)).data.user,onSuccess:()=>{n.refetch()}}),u=t=>{t.preventDefault();const a=new FormData(t.currentTarget);i.mutate({displayName:String(a.get("displayName")??""),bio:String(a.get("bio")??""),status:String(a.get("status")??"")})},s=n.data,o=s?.status==="BACKGROUND"?"ONLINE":s?.status??"ONLINE";return e.jsxs("div",{className:"settings-page",children:[e.jsx("h2",{children:"Профиль"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("label",{children:["Имя",e.jsx("input",{name:"displayName",defaultValue:s?.displayName??""})]}),e.jsxs("label",{children:["Статус",e.jsxs("select",{name:"status",defaultValue:o,children:[e.jsx("option",{value:"ONLINE",children:"Онлайн"}),e.jsx("option",{value:"AWAY",children:"Отошел"}),e.jsx("option",{value:"DND",children:"Не беспокоить"}),e.jsx("option",{value:"OFFLINE",children:"Оффлайн"})]})]}),e.jsxs("label",{children:["О себе",e.jsx("textarea",{name:"bio",defaultValue:s?.bio??""})]}),e.jsx("button",{type:"submit",disabled:i.isPending,children:"Сохранить"})]})]})}export{j as default};
